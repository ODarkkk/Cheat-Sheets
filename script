#!/bin/bash

FILE="$HOME/cheatsheets.md"

if [ ! -f "$FILE" ]; then
  echo "Cheatsheet file not found: $FILE"
  exit 1
fi

if [ -z "$1" ]; then
  less "$FILE"
  exit 0
fi

SEARCH="$1"

awk -v term="$SEARCH" '
BEGIN { in_section=0 }
/^#/ {
  if (tolower($0) ~ tolower(term)) {
    in_section=1
  } else if (in_section) {
    exit  # Found next section, stop
  }
}
in_section { print }
' "$FILE"
